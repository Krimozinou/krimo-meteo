<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Krimo Météo Algérie</title>

  <!-- Styles -->
  <link rel="stylesheet" href="./app.css" />
</head>

<body>
  <header>
    <div class="container brand">
      <div style="display:flex;align-items:center;gap:10px;">
        <img
          src="./logo.png"
          alt="Krimo Météo Algérie"
          style="width:44px;height:44px;border-radius:12px;object-fit:cover;border:1px solid rgba(255,255,255,.15);"
        />
        <h1 style="margin:0;">Krimo Météo Algérie</h1>
      </div>

      <div class="badge" id="statusBadge">● Chargement…</div>
    </div>

    <!-- Bandeau alertes (rempli par app.js) -->
    <div class="container">
      <div id="alertBanner" class="alert hidden"></div>
    </div>
  </header>

  <main class="container">
    <div class="grid">

      <!-- Bloc principal -->
      <section class="card">
        <h2>Prévisions (4 jours)</h2>
        <div class="content">

          <div class="row">
            <select id="citySelect"></select>
            <button id="refreshBtn">Actualiser</button>
          </div>

          <!-- Prévisions (cards jours) -->
          <div id="forecast" style="margin-top:12px;"></div>

          <div class="footer" style="margin-top:12px;">
            Données météo : Open-Meteo • Heure locale de la ville • Style : Krimo Météo Algérie
          </div>

          <!-- CARTES MÉTÉO -->
          <div style="margin-top:18px;">
            <h2 style="margin:0 0 10px 0;">Cartes météo</h2>

            <div class="mapGrid">
              <div class="mapCard">
                <h3 style="margin:0 0 10px 0;">Vent / Rafales</h3>
                <iframe
                  id="windyMap"
                  title="Carte Vent Windy"
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"
                  src="https://embed.windy.com/embed2.html?lat=36.7&lon=3.1&detailLat=36.7&detailLon=3.1&zoom=6&level=surface&overlay=wind&product=ecmwf&metricWind=km%2Fh&metricTemp=%C2%B0C"
                  frameborder="0">
                </iframe>
              </div>

              <div class="mapCard">
                <h3 style="margin:0 0 10px 0;">Pluie</h3>
                <iframe
                  id="rainMap"
                  title="Carte Pluie Windy"
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"
                  src="https://embed.windy.com/embed2.html?lat=36.7&lon=3.1&detailLat=36.7&detailLon=3.1&zoom=6&level=surface&overlay=rain&product=ecmwf&metricWind=km%2Fh&metricTemp=%C2%B0C"
                  frameborder="0">
                </iframe>
              </div>
            </div>
          </div>

          <!-- CARTE ALGÉRIE (schéma + points des 24 villes) -->
          <div style="margin-top:18px;">
            <h2 style="margin:0 0 10px 0;">Carte Algérie — Vigilances</h2>
            <div id="dzMap" class="dzMap">
              <div class="dzMapTitle">Nord</div>
              <div class="dzMapTitle dzMapTitleBottom">Sud</div>
            </div>
            <div class="small" id="dzMapLegend" style="margin-top:10px;opacity:.9"></div>
          </div>

        </div>
      </section>

      <!-- Liste villes -->
      <aside class="card">
        <h2>Villes (24)</h2>
        <div class="content">
          <p class="small">
            6 littoral • 6 proche littoral • 6 hauts plateaux • 6 Sud
          </p>

          <div id="cityGroups"></div>

          <p class="small" style="margin-top:12px">
            Astuce : tu peux remplacer/ajouter des villes dans <b>cities.js</b>.
          </p>
        </div>
      </aside>

    </div>
  </main>

  <!-- Scripts -->
  <script src="./cities.js"></script>
  <script src="./app.js"></script>
</body>
</html>
